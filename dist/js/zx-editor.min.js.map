{"version":3,"file":"zx-editor.min.js","sources":["../../node_modules/_ssr-window@1.0.1@ssr-window/dist/ssr-window.esm.js","../../src/js/dom-class/helper.js","../../src/js/util/index.js","../../src/js/dom-class/index.js","../../src/js/cursor-class/index.js","../../src/js/expansion-panel/index.js","../../src/js/plugins/text-style/helper.js","../../src/js/config.js","../../src/js/plugins/text-style/style-expansion-panel.js","../../src/js/plugins/text-style/index.js","../../src/js/plugins/select-picture-btn/index.js","../../src/js/toolbar/index.js","../../src/js/events/paste.js","../../src/js/custom-events/index.js","../../src/js/image-handler/helper.js","../../src/js/image-handler/index.js","../../src/js/index.js","../../src/js/init/extend-prototype.js","../../src/js/init/init-dom.js","../../src/js/init/init-style.js","../../src/js/events/index.js"],"sourcesContent":["/**\n * SSR Window 1.0.1\n * Better handling for window object in SSR environment\n * https://github.com/nolimits4web/ssr-window\n *\n * Copyright 2018, Vladimir Kharlampidi\n *\n * Licensed under MIT\n *\n * Released on: July 18, 2018\n */\nvar doc = (typeof document === 'undefined') ? {\n  body: {},\n  addEventListener: function addEventListener() {},\n  removeEventListener: function removeEventListener() {},\n  activeElement: {\n    blur: function blur() {},\n    nodeName: '',\n  },\n  querySelector: function querySelector() {\n    return null;\n  },\n  querySelectorAll: function querySelectorAll() {\n    return [];\n  },\n  getElementById: function getElementById() {\n    return null;\n  },\n  createEvent: function createEvent() {\n    return {\n      initEvent: function initEvent() {},\n    };\n  },\n  createElement: function createElement() {\n    return {\n      children: [],\n      childNodes: [],\n      style: {},\n      setAttribute: function setAttribute() {},\n      getElementsByTagName: function getElementsByTagName() {\n        return [];\n      },\n    };\n  },\n  location: { hash: '' },\n} : document; // eslint-disable-line\n\nvar win = (typeof window === 'undefined') ? {\n  document: doc,\n  navigator: {\n    userAgent: '',\n  },\n  location: {},\n  history: {},\n  CustomEvent: function CustomEvent() {\n    return this;\n  },\n  addEventListener: function addEventListener() {},\n  removeEventListener: function removeEventListener() {},\n  getComputedStyle: function getComputedStyle() {\n    return {\n      getPropertyValue: function getPropertyValue() {\n        return '';\n      },\n    };\n  },\n  Image: function Image() {},\n  Date: function Date() {},\n  screen: {},\n  setTimeout: function setTimeout() {},\n  clearTimeout: function clearTimeout() {},\n} : window; // eslint-disable-line\n\nexport { win as window, doc as document };\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/18 22:57\n */\nimport util from '../util/index'\nimport { document } from 'ssr-window'\n\n/**\n * unique\n * Remove duplicate elements in an array\n * @param arr\n * @return {Array}\n */\nexport function unique (arr) {\n  const uniqueArray = []\n  for (let i = 0; i < arr.length; i += 1) {\n    if (uniqueArray.indexOf(arr[i]) === -1) uniqueArray.push(arr[i])\n  }\n  return uniqueArray\n}\n\n/**\n * 改变元素的nodeName\n * @param oldNode\n * @param tagName target nodeName\n * @return {*}\n */\nexport function changeNodeName (oldNode, tagName) {\n  let oldNodeName = oldNode.nodeName.toLowerCase()\n  // check tagName\n  if (typeof tagName !== 'string' || util.strip(tagName).length === 0) {\n    throw new TypeError(`changeNodeName(oldNode, tagName) 'tagName' is ${tagName}, should be a 'string'`)\n  }\n  if (oldNodeName === tagName.toLowerCase()) return oldNode\n  let el = document.createElement(tagName)\n  // 非Element节点，当字符串节点处理\n  if (oldNode.nodeType !== 1) {\n    el.appendChild(oldNode)\n  } else {\n   // 获取属性class, style, id\n    if (oldNode.className) el.className = oldNode.className\n    if (oldNode.id) el.id = oldNode.id\n    let style = oldNode.getAttribute('style')\n    if (style) el.setAttribute('style', style)\n    el.innerHTML = oldNode.innerHTML\n  }\n  // replace Node on document\n  if (oldNode.parentNode) {\n    oldNode.parentNode.replaceChild(el, oldNode)\n  }\n  return el\n}\n\n/**\n * addEventListener\n * @param el\n * @param eventType\n * @param fn\n * @param useCapture\n */\nexport function addEventListener (el, eventType, fn, useCapture) {\n  if (el.addEventListener) {\n    el.addEventListener(eventType, fn, useCapture)\n  } else if (el.attachEvent) {\n    el.attachEvent(eventType, fn)\n  } else {\n    el[`on${eventType}`] = fn\n  }\n}\n\n/**\n * removeEventListener\n * @param el\n * @param eventType\n * @param fn\n * @param useCapture\n */\nexport function removeEventListener (el, eventType, fn, useCapture) {\n  if (el.removeEventListener) {\n    el.removeEventListener(eventType, fn, useCapture)\n  } else if (el.detachEvent) {\n    el.detachEvent(eventType, fn)\n  } else {\n    el[`on${eventType}`] = null\n  }\n}\n\n/**\n * crate text node\n * @param str\n * @return {Text | ActiveX.IXMLDOMText}\n */\nfunction createTextNode (str) {\n  return document.createTextNode(str)\n}\n\n/**\n * create element\n * @param tag HTML tag name\n * @param attrs attributes\n * @return {*|{children, childNodes, style, setAttribute, getElementsByTagName}|ActiveX.IXMLDOMElement|HTMLElement}\n */\nexport function createElement (tag, attrs) {\n  if (!tag && typeof tag !== 'string') {\n    throw new TypeError('Parameter error')\n  }\n  let el = document.createElement(tag)\n  if (attrs && typeof attrs === 'object') {\n    for (let key in attrs) {\n      if (attrs.hasOwnProperty(key)) {\n        el.setAttribute(key, attrs[key])\n      }\n    }\n  }\n  return el\n}\n\n/**\n * create dom\n * @param vnode {tag: 'div', attrs: {class: 'class-name', 'data-id': 1000}, child: ['any text', vnode]}\n * @return {*}\n */\nexport function createVdom (vnode) {\n  if (!vnode) return null\n  if (typeof vnode === 'string') {\n    return createTextNode(vnode)\n  }\n  let tag = vnode.tag\n  let attrs = vnode.attrs\n  let child = vnode.child\n  if (!tag && !attrs && !child) return null\n  // 创建dom\n  let el = createElement(tag || 'div', attrs)\n  if (Array.isArray(child) && child.length) {\n    let itemNode\n    child.forEach(item => {\n      itemNode = createVdom(item)\n      if (itemNode) el.appendChild(itemNode)\n    })\n  } else if (child && typeof child === 'string') {\n    el.appendChild(createTextNode(child))\n  }\n  return el\n}\n\n/**\n * get window\n * @param el\n * @return {any}\n */\nexport function getWindow (el) {\n  // nodeType = 9 文档节点document\n  // document.defaultView reference to the window object\n  // document.parentWindow reference to the container object of the window\n  return util.isWindow(el) ? el : el.nodeType === 9 ? el.defaultView || el.parentWindow : false\n}\n\nexport function scrollTo (...args) {\n  let [left, top, duration, easing, callback] = args\n  if (args.length === 4 && typeof easing === 'function') {\n    [left, top, duration, callback, easing] = args\n  }\n  if (typeof easing === 'undefined') easing = 'swing'\n\n  return this.each(function () {\n    const el = this\n    let animateTop = top > 0 || top === 0\n    let animateLeft = left > 0 || left === 0\n\n    let isWindow = util.isWindow(el)\n\n    if (typeof easing === 'undefined') {\n      easing = 'swing'\n    }\n\n    if (animateTop) {\n      if (!duration) {\n        if (isWindow) {\n          el.scrollTo(0, top)\n        } else {\n          el.scrollTop = top\n        }\n      }\n    }\n    if (animateLeft) {\n      if (!duration) {\n        if (isWindow) {\n          el.scrollTo(left, 0)\n        } else {\n          el.scrollLeft = left\n        }\n      }\n    }\n\n  })\n}\n","/**\n * Created by Capricorncd.\n * Date: 2019/04/15 13:16\n * Copyright © 2017-present, https://github.com/capricorncd\n */\nimport { document, window } from 'ssr-window'\nimport {\n  changeNodeName,\n  unique\n} from '../dom-class/helper'\n\nconst arr = []\n\n// Support: Android <=4.0 only\n// Make sure we trim BOM and NBSP\nconst regTrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g\n\n// navigator\nconst USER_AGENT = window.navigator.userAgent\nconst PLATFORM = window.navigator.platform\n\n/**\n * 转换为整数\n * @param n\n * @returns {*}\n */\nfunction int (n) {\n  let num = parseInt(n)\n  return isNaN(num) ? 0 : num\n}\n\n/**\n * 去除字符串首尾空格\n * @param str\n * @returns {string}\n */\nfunction trim (str) {\n  return str ? str.toString().replace(regTrim, '') : ''\n}\n\n/**\n * 将伪数组，转化为数组\n * @param ArrayLike\n * @param index\n * @return {T[]}\n */\nfunction slice (ArrayLike, index) {\n  return arr.slice.call(ArrayLike, int(index))\n}\n\n/**\n * 去除字符串多余空格\n * 除首尾外，中间连续空格被替换为一个空格\n * @param str\n * @return {string}\n */\nfunction strip (str) {\n  return trim(str).replace(/\\s+/g, ' ')\n}\n\n/**\n * 是否为Element对象\n * @param el\n * @return {*|boolean}\n */\nfunction isElement (el) {\n  return isObject(el) && el.nodeType\n}\n\n/**\n * 是否为对象\n * @param obj\n * @param isAbsolute 必须满足父级原型为Object的对象\n * @return {*|boolean}\n */\nfunction isObject (obj, isAbsolute) {\n  let isObj = obj && typeof obj === 'object'\n  return isAbsolute ? isObj && obj.toString() === '[object Object]' : isObj\n}\n\nfunction isIPhone () {\n  return /iphone/i.test(USER_AGENT) && /iphone/.test(PLATFORM)\n}\n\nfunction isIPhoneX () {\n  return window.screen.height === 812 && window.screen.width === 375\n}\n\nfunction isWindow (obj) {\n  return obj !== null && obj === obj.window\n}\n\n/**\n * 移除html标签\n * @param str\n * @return {string}\n */\nfunction removeHtmlTags (str) {\n  str = (str + '').replace(/<\\/?.+?>/g, '')\n  return strip(str)\n}\n\nfunction toHex (num) {\n  let n = typeof num === 'number' ? num : int(num)\n  let hex = n.toString(16)\n  return hex[1] ? hex : '0' + hex\n}\n\nfunction rgbToHex (rgb) {\n  let hex = ''\n  if (/rgb.*?\\((\\d+)\\D+?(\\d+)\\D+?(\\d+)/.test(rgb)) {\n    hex += toHex(RegExp.$1)\n    hex += toHex(RegExp.$2)\n    hex += toHex(RegExp.$3)\n  }\n  return hex ? '#' + hex : rgb\n}\n\n/**\n * string to hump format\n * @param str line-height: lineHeight\n * @return {string}\n */\nfunction toHump (str) {\n  return strip(str).replace(/([-_\\s]+\\w)/g, (match, $1) => {\n    // console.log(match, $1)\n    return $1[1].toUpperCase()\n  })\n}\n\nfunction supportBoxModel () {\n  const body = document.getElementsByTagName('body')[0]\n  let div = document.createElement('div')\n  body.appendChild(div)\n  // Figure out if the W3C box model works as expected\n  div.innerHTML = ''\n  div.style.width = div.style.paddingLeft = '1px'\n  // 通过检测div块的offsetWidth值是否是2px来判断浏览器是否支持盒模型\n  let result = div.offsetWidth === 2\n  body.removeChild(div)\n  return result\n}\n\nexport default {\n  isIPhone: isIPhone(),\n  isIPhoneX: isIPhoneX(),\n  supportBoxModel: supportBoxModel(),\n  changeNodeName,\n  int,\n  isElement,\n  isObject,\n  isWindow,\n  removeHtmlTags,\n  rgbToHex,\n  slice,\n  strip,\n  trim,\n  toHump,\n  unique\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/17 20:36\n */\nimport util from '../util/index'\nimport { document, window } from 'ssr-window'\nimport { unique, changeNodeName, addEventListener, removeEventListener, getWindow, scrollTo } from './helper'\n\n/**\n * DOM操作\n * @param selector\n * @param context\n * @constructor\n */\nexport function ZxEditorQuery (selector, context) {\n\n  // HANDLE: $(\"\"), $(null), $(undefined), $(false)\n  if ( !selector ) return this\n\n  if (selector instanceof ZxEditorQuery) return selector\n\n  let doms\n\n  // Handle HTML strings\n  if ( typeof selector === 'string' ) {\n    if ( selector[ 0 ] === '<' &&\n      selector[ selector.length - 1 ] === '>' && selector.length >= 3 ) {\n\n      // Assume that strings that start and end with <> are HTML and skip the regex check\n      let tempDiv = document.createElement('div')\n      tempDiv.innerHTML = selector\n      doms = util.slice(tempDiv.childNodes)\n    } else if (/^[#\\w\\d_,\\s-]+$/.test(selector)) {\n      if (context instanceof ZxEditorQuery) {\n        context =  context[0]\n      }\n      context = util.isElement(context) && context.nodeType === 1 ? context : document\n      doms = util.slice(context.querySelectorAll(util.strip(selector)))\n    }\n    // HANDLE: $(DOMElement)\n  } else if ( selector.nodeType || selector === window || selector === document ) {\n    doms = [selector]\n    // HANDLE: $(DOMElements)\n  } else if (Array.isArray(selector) && selector.every(item => util.isElement(item))) {\n    doms = selector\n  }\n\n  if (doms) {\n    doms.forEach((el, i) => {\n      this[i] = el\n    })\n    this.length = doms.length\n  }\n  return this\n}\n\n/**\n * prototype\n */\nZxEditorQuery.prototype = {\n  /**\n   * constructor\n   */\n  constructor: ZxEditorQuery,\n\n  /**\n   * length\n   */\n  length: 0,\n\n  /**\n   * ********************************************\n   * find item\n   * ********************************************\n   */\n\n  /**\n   * get children\n   * @param selector\n   * @param anyNode Boolean\n   * @return {*|HTMLElement}\n   */\n  children (selector, anyNode) {\n    // check arguments\n    if (typeof selector === 'boolean') {\n      anyNode = selector\n      selector = void 0\n    }\n\n    const children = []\n    let el\n    for (let i = 0; i < this.length; i++) {\n\n      const childNodes = this[i].childNodes\n\n      for (let j = 0; j < childNodes.length; j++) {\n        el = childNodes[j]\n        if (!selector) {\n          if (anyNode) {\n            children.push(el)\n          } else if (el.nodeType === 1) {\n            children.push(el)\n          }\n        } else if (el.nodeType === 1 && $(el).is(selector)) {\n          children.push(el)\n        }\n      }\n\n    }\n    return $(unique(children))\n  },\n\n  /**\n   * Find the nearest matching element in the parent\n   * @param selector\n   * @return {*}\n   */\n  closest (selector) {\n    let closest = this\n    if (typeof selector === 'undefined') {\n      return new $()\n    }\n    if (!closest.is(selector)) {\n      closest = closest.parents(selector).eq(0)\n    }\n    return closest\n  },\n\n  /**\n   * equal\n   * @param i\n   * @return {*|jQuery|HTMLElement}\n   */\n  eq (i) {\n    let len = this.length\n    let index = util.int(i) + (i < 0 ? len : 0)\n    return $(this[index])\n  },\n\n  /**\n   * find item\n   * @param selector\n   * @return {*|jQuery|HTMLElement}\n   */\n  find (selector) {\n    let found\n    let foundElements = []\n    for (let i = 0; i < this.length; i++) {\n      if (this[i].nodeType !== 1) continue\n      found = this[i].querySelectorAll(selector)\n      for (let j = 0; j < found.length; j++) {\n        foundElements.push(found[j])\n      }\n    }\n    return $(foundElements)\n  },\n\n  /**\n   *\n   * @param parent\n   * @return {*}\n   */\n  findParentFrom (parent) {\n    if (parent instanceof ZxEditorQuery) parent = parent[0]\n    let current = this[0]\n    // if (!current || !current.nodeType || !parent || !parent.nodeType) return null\n    if (current === parent) return null\n    let tmpParent\n    while (current.parentNode) {\n      tmpParent = current.parentNode\n      if (tmpParent === parent) return $(current)\n      current = tmpParent\n    }\n    return null\n  },\n\n  /**\n   * get first child\n   * @return {*|jQuery|HTMLElement}\n   */\n  firstChild () {\n    return this.children().eq(0)\n  },\n\n  /**\n   * get last child\n   * @return {*|jQuery|HTMLElement}\n   */\n  lastChild () {\n    return this.children().eq(-1)\n  },\n\n  /**\n   * get next siblings\n   * @param selector\n   * @return {*|jQuery|HTMLElement}\n   */\n  next (selector) {\n    if (this.length > 0) {\n      if (selector) {\n        if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) {\n          return $([this[0].nextElementSibling])\n        }\n        return $()\n      }\n\n      if (this[0].nextElementSibling) return $([this[0].nextElementSibling])\n    }\n    return $()\n  },\n\n  /**\n   * get nearest parents\n   * @param selector\n   * @return {*|jQuery|HTMLElement}\n   */\n  parent (selector) {\n    const parents = []\n    for (let i = 0; i < this.length; i++) {\n      if (this[i].parentNode !== null) {\n        if (selector) {\n          if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode)\n        } else {\n          parents.push(this[i].parentNode)\n        }\n      }\n    }\n    return $(unique(parents))\n  },\n\n  /**\n   * get all parents\n   * @param selector\n   * @return {*|jQuery|HTMLElement}\n   */\n  parents (selector) {\n    const parents = []\n    for (let i = 0; i < this.length; i++) {\n      let parent = this[i].parentNode\n      while (parent) {\n        if (selector) {\n          if ($(parent).is(selector)) parents.push(parent)\n        } else {\n          parents.push(parent)\n        }\n        parent = parent.parentNode\n      }\n    }\n    return $(unique(parents))\n  },\n\n  /**\n   * ********************************************\n   * class\n   * ********************************************\n   */\n\n  /**\n   * add className\n   * @param className\n   * @return {ZxEditorQuery}\n   */\n  addClass (className) {\n    if (!className) return this\n    let classes = className.split(' ')\n    classes.forEach(cls => {\n      for (let j = 0; j < this.length; j++) {\n        this[j] && this[j].classList && this[j].classList.add(cls)\n      }\n    })\n    return this\n  },\n\n  /**\n   * remove className\n   * @param className\n   * @return {ZxEditorQuery}\n   */\n  removeClass (className) {\n    let classes = className.split(' ')\n    classes.forEach(cls => {\n      for (let j = 0; j < this.length; j++) {\n        this[j] && this[j].classList && this[j].classList.remove(cls)\n      }\n    })\n    return this\n  },\n\n  /**\n   * check className\n   * @param className\n   * @return {boolean}\n   */\n  hasClass (className) {\n    if (!this[0]) return false\n    return this[0].classList.contains(className)\n  },\n\n  /**\n   * ********************************************\n   * attribute, data\n   * ********************************************\n   */\n\n  /**\n   * get/set attribute\n   * @param attrs attribute or object\n   * @param value\n   * @return {*}\n   */\n  attr (attrs, value) {\n    if (arguments.length === 1 && typeof attrs === 'string') {\n      // Get attr\n      if (this[0]) return this[0].getAttribute(attrs)\n      return void 0\n    }\n\n    // Set attrs\n    for (let i = 0; i < this.length; i++) {\n      if (arguments.length === 2) {\n        // String\n        this[i].setAttribute(attrs, value)\n      } else {\n        // Object\n        for (let attr in attrs) {\n          this[i][attr] = attrs[attr]\n          this[i].setAttribute(attr, attrs[attr])\n        }\n      }\n    }\n    return this\n  },\n\n  /**\n   * remove attribute\n   * @param attr\n   * @return {ZxEditorQuery}\n   */\n  removeAttr (attr) {\n    for (let i = 0; i < this.length; i++) {\n      this[i].removeAttribute(attr)\n    }\n    return this\n  },\n\n  /**\n   * get/set data-\n   * @param key\n   * @param value\n   * @return {*}\n   */\n  data (key, value) {\n    let el\n    if (typeof value === 'undefined') {\n      el = this[0]\n      if (el) {\n        if (el.dataStorage) return el.dataStorage[key]\n        let val = el.getAttribute(`data-${key}`)\n        return /^\\d+\\.?\\d*$/.test(val) ? +val : val\n      }\n      return undefined\n    }\n\n    // Set value\n    for (let i = 0; i < this.length; i++) {\n      el = this[i]\n      if (!el.dataStorage) el.dataStorage = {}\n      el.dataStorage[key] = value\n    }\n    return this\n  },\n\n  /**\n   * ********************************************\n   * insert node\n   * ********************************************\n   */\n\n  /**\n   * appendChild\n   * @param args\n   * @return {ZxEditorQuery}\n   */\n  append (...args) {\n    let newChild\n\n    for (let k = 0; k < args.length; k++) {\n      newChild = args[k];\n      for (let i = 0; i < this.length; i++) {\n        if (typeof newChild === 'string') {\n          const tempDiv = document.createElement('div')\n          tempDiv.innerHTML = newChild\n          while (tempDiv.firstChild) {\n            this[i].appendChild(tempDiv.firstChild)\n          }\n        } else if (newChild instanceof ZxEditorQuery) {\n          for (let j = 0; j < newChild.length; j++) {\n            this[i].appendChild(newChild[j])\n          }\n        } else {\n          this[i].appendChild(newChild)\n        }\n      }\n    }\n    return this\n  },\n\n  /**\n   * append child to parent\n   * @param parent\n   * @return {ZxEditorQuery}\n   */\n  appendTo (parent) {\n    $(parent).append(this)\n    return this\n  },\n\n  /**\n   * insert after selector\n   * @param selector\n   */\n  insertAfter(selector) {\n    const after = $(selector)\n    for (let i = 0; i < this.length; i++) {\n      if (after.length === 1) {\n        after[0].parentNode.insertBefore(this[i], after[0].nextSibling)\n      } else if (after.length > 1) {\n        for (let j = 0; j < after.length; j++) {\n          after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling)\n        }\n      }\n    }\n  },\n  insertBefore (selector) {\n    const before = $(selector)\n    for (let i = 0; i < this.length; i++) {\n      if (before.length === 1) {\n        before[0].parentNode.insertBefore(this[i], before[0])\n      } else if (before.length > 1) {\n        for (let j = 0; j < before.length; j++) {\n          before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j])\n        }\n      }\n    }\n  },\n  prepend (newChild) {\n    let i\n    let j\n    for (i = 0; i < this.length; i++) {\n      if (typeof newChild === 'string') {\n        const tempDiv = document.createElement('div')\n        tempDiv.innerHTML = newChild\n        for (j = tempDiv.childNodes.length - 1; j >= 0; j--) {\n          this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0])\n        }\n      } else if (newChild instanceof ZxEditorQuery) {\n        for (j = 0; j < newChild.length; j++) {\n          this[i].insertBefore(newChild[j], this[i].childNodes[0])\n        }\n      } else {\n        this[i].insertBefore(newChild, this[i].childNodes[0])\n      }\n    }\n    return this\n  },\n  prependTo (parent) {\n    $(parent).prepend(this)\n    return this\n  },\n\n  /**\n   * replace child\n   * @param selector\n   * @return {ZxEditorQuery}\n   */\n  replace (selector) {\n    let newChild = $(selector)\n    let parentNode\n    for (let i = 0; i < this.length; i++) {\n      parentNode = this[i].parentNode\n      if (parentNode) {\n        parentNode.replaceChild(newChild[0].cloneNode(true), this[i])\n      }\n    }\n    return this\n  },\n\n  /**\n   * remove item\n   * @param index\n   * @return {ZxEditorQuery}\n   */\n  remove (index) {\n    let el\n    if (typeof index !== 'number') {\n      for (let i = 0; i < this.length; i++) {\n        el = this[i]\n        if (el.parentNode) el.parentNode.removeChild(el)\n      }\n    } else {\n      el = this[index]\n      if (el && el.parentNode) el.parentNode.removeChild(el)\n    }\n    return this\n  },\n\n  /**\n   * ********************************************\n   * check\n   * ********************************************\n   */\n\n  /**\n   * is\n   * @param selector\n   * @return {*}\n   */\n  is (selector) {\n    const el = this[0]\n    let compareWith\n    let i\n    if (!el || typeof selector === 'undefined') return false;\n    if (typeof selector === 'string') {\n      if (el.matches) return el.matches(selector)\n      else if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector)\n      else if (el.msMatchesSelector) return el.msMatchesSelector(selector)\n\n      compareWith = $(selector)\n      for (i = 0; i < compareWith.length; i++) {\n        if (compareWith[i] === el) return true\n      }\n      return false\n    } else if (selector === document) return el === document\n    else if (selector === window) return el === window\n\n    if (selector.nodeType || selector instanceof ZxEditorQuery) {\n      compareWith = selector.nodeType ? [selector] : selector\n      for (i = 0; i < compareWith.length; i++) {\n        if (compareWith[i] === el) return true\n      }\n      return false\n    }\n    return false\n  },\n\n  isTextNode () {\n    let el = this[0]\n    if (!el || !el.nodeType) return false\n    return el.nodeType === 3\n  },\n\n  /**\n   * 子元素（不包含br）是否为空\n   * @return {boolean}\n   */\n  isEmpty () {\n    return !util.strip(this.text()) && !this.find('img, video, audio')[0]\n  },\n\n  /**\n   * target是否为this的第一个子元素\n   * @param target\n   * @return {boolean}\n   */\n  isFirstChildren (target) {\n    return this.children().eq(0).is(target)\n  },\n\n  /**\n   * target是否为this的最后一个子元素\n   * @param target\n   * @return {boolean}\n   */\n  isLastChildren (target) {\n    return this.children().eq(-1).is(target)\n  },\n\n  indexOf(el) {\n    if (el instanceof ZxEditorQuery) el = el[0]\n    for (let i = 0; i < this.length; i++) {\n      if (this[i] === el) return i\n    }\n    return -1\n  },\n\n  /**\n   * this is in $parent children\n   * @param $parent\n   * @return {boolean}\n   */\n  // isInChild ($parent) {\n  //   let el = this[0]\n  //   let childNodes = $parent[0].childNodes\n  //   let tmp\n  //   for (let i = 0; i < childNodes.length; i++) {\n  //     tmp = childNodes[i]\n  //     if (tmp === el) return true\n  //     if (tmp.nodeType === 1 && this.isInChild($(tmp))) return true\n  //   }\n  //   return false\n  // },\n\n  /**\n   * every\n   * @param fn\n   * @return {boolean}\n   */\n  every (fn) {\n    if (typeof fn !== 'function') throw new TypeError(`every(fn) fn is not a function`)\n    let len = this.length\n    let thisArg = arguments.length >= 2 ? arguments[1] : void 0\n    for (let i = 0; i < len; i++) {\n      if (fn.call(thisArg, $(this[i]), i)) return false\n    }\n    return true\n  },\n\n  /**\n   * ********************************************\n   * content\n   * ********************************************\n   */\n  text (text) {\n    if (typeof text === 'undefined') {\n      if (this[0]) {\n        return this[0].textContent.trim()\n      }\n      return ''\n    }\n\n    for (let i = 0; i < this.length; i++) {\n      this[i].textContent = text\n    }\n    return this\n  },\n\n  html (html) {\n    if (typeof html === 'undefined') {\n      return this[0] ? this[0].innerHTML : ''\n    }\n\n    for (let i = 0; i < this.length; i++) {\n      this[i].innerHTML = html\n    }\n    return this\n  },\n\n  /**\n   * ********************************************\n   * node\n   * ********************************************\n   */\n  nodeName () {\n    return this[0] ? this[0].nodeName.toLowerCase() : null\n  },\n\n  // https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\n  nodeType () {\n    return this[0] ? this[0].nodeType : 0\n  },\n\n  changeNodeName (nodeName) {\n    for (let i = 0; i < this.length; i++) {\n      // change nodeName\n      this[i] = changeNodeName(this[i], nodeName)\n    }\n    return this\n  },\n  /**\n   * ********************************************\n   * visible\n   * ********************************************\n   */\n  hide () {\n    for (let i = 0; i < this.length; i++) {\n      this[i].style.display = 'none'\n    }\n    return this\n  },\n  show () {\n    for (let i = 0; i < this.length; i++) {\n      const el = this[i]\n      if (el.style.display === 'none') {\n        el.style.display = ''\n      }\n      if (window.getComputedStyle(el, null).getPropertyValue('display') === 'none') {\n        // Still not visible\n        el.style.display = 'block'\n      }\n    }\n    return this\n  },\n  /**\n   * ********************************************\n   * Events\n   * ********************************************\n   */\n  on (...args) {\n    let [eventType, fn, useCapture] = args\n    let el\n    for (let i = 0; i < this.length; i++) {\n      el = this[i]\n      if (el.nodeType === 1 || el === document || el === window) {\n        addEventListener(el, eventType, fn, useCapture)\n      }\n    }\n    return this\n  },\n  off(...args) {\n    let [eventType, fn, useCapture] = args\n    let el\n    for (let i = 0; i < this.length; i++) {\n      el = this[i]\n      if (el.nodeType === 1 || el === document || el === window) {\n        removeEventListener(el, eventType, fn, useCapture)\n      }\n    }\n    return this;\n  },\n  trigger(...args) {\n    const events = args[0].split(' ')\n    const eventData = args[1]\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i]\n      for (let j = 0; j < this.length; j++) {\n        const el = this[j]\n        let evt\n        try {\n          evt = new window.CustomEvent(event, {\n            detail: eventData,\n            bubbles: true,\n            cancelable: true,\n          })\n        } catch (e) {\n          evt = document.createEvent('Event')\n          evt.initEvent(event, true, true)\n          evt.detail = eventData\n        }\n        el.dispatchEvent(evt)\n      }\n    }\n    return this\n  },\n  /**\n   * ********************************************\n   * css\n   * ********************************************\n   */\n  css(props, value) {\n    let i\n    if (arguments.length === 1) {\n      if (typeof props === 'string') {\n        if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(props)\n        return void 0\n      } else {\n        for (i = 0; i < this.length; i += 1) {\n          for (let prop in props) {\n            this[i].style[prop] = props[prop]\n          }\n        }\n      }\n    }\n    if (arguments.length === 2 && typeof props === 'string') {\n      for (i = 0; i < this.length; i += 1) {\n        this[i].style[props] = value;\n      }\n    }\n    return this\n  },\n\n  styles() {\n    if (this[0]) return window.getComputedStyle(this[0], null)\n    return {}\n  },\n  /**\n   * ********************************************\n   * size\n   * ********************************************\n   */\n  width() {\n    if (this[0] === window) return window.innerWidth\n    return this.length > 0 ? parseFloat(this.css('width')) : null\n  },\n\n  outerWidth(includeMargins) {\n    if (this.length > 0) {\n      let offsetWidth = this[0].offsetWidth\n      if (includeMargins) {\n        const styles = this.styles()\n        return offsetWidth\n          + parseFloat(styles.getPropertyValue('margin-right'))\n          + parseFloat(styles.getPropertyValue('margin-left'))\n      }\n      return offsetWidth\n    }\n    return null\n  },\n\n  height() {\n    if (this[0] === window) return window.innerHeight\n    return this.length > 0 ? parseFloat(this.css('height')) : null\n  },\n\n  outerHeight(includeMargins) {\n    if (this.length > 0) {\n      let offsetHeight = this[0].offsetHeight\n      if (includeMargins) {\n        let styles = this.styles()\n        return offsetHeight\n          + parseFloat(styles.getPropertyValue('margin-top'))\n          + parseFloat(styles.getPropertyValue('margin-bottom'))\n      }\n      return offsetHeight\n    }\n    return null\n  },\n\n  offset() {\n    if (this.length > 0) {\n      let el = this[0]\n      let box = el.getBoundingClientRect()\n      let body = document.body\n      let clientTop = el.clientTop || body.clientTop || 0\n      let clientLeft = el.clientLeft || body.clientLeft || 0\n      let scrollTop = el === window ? window.scrollY : el.scrollTop\n      let scrollLeft = el === window ? window.scrollX : el.scrollLeft\n      return {\n        top: (box.top + scrollTop) - clientTop,\n        left: (box.left + scrollLeft) - clientLeft,\n      }\n    }\n    return null\n  },\n  /**\n   * ********************************************\n   * for\n   * ********************************************\n   */\n  each (fn) {\n    if (!fn) return this\n    for (let i = 0; i < this.length; i++) {\n      if (fn.call(this[i], i, this[i]) === false) {\n        return this\n      }\n    }\n    return this\n  },\n  /**\n   * ********************************************\n   * scroll\n   * ********************************************\n   */\n\n  scrollTo,\n\n  scrollTop(...args) {\n    let [top, duration, easing, callback] = args\n    if (args.length === 3 && typeof easing === 'function') {\n      [top, duration, callback, easing] = args\n    }\n    let el\n    if (typeof top === 'undefined') {\n      el = this[0]\n      if (el) return util.isWindow(el) ? el.pageYOffset : el.scrollTop\n      return null\n    }\n    return scrollTo.call(this, undefined, top, duration, easing, callback)\n  }\n\n  // scrollTop (val) {\n  //   let win\n  //   let el = this[0]\n  //   // get\n  //   if (val === void 0) {\n  //     if (!el) return null\n  //     win = getWindow(el)\n  //     return win ? ('pageYOffset' in win) ? win.pageYOffset : util.supportBoxModel && win.document.documentElement.scrollTop || win.document.body.scrollTop : el.scrollTop\n  //   }\n  //   // set\n  //   for (let i = 0; i < this.length; i++) {\n  //     win = getWindow(this[i])\n  //     if (win) {\n  //       win.scrollTo(0, val)\n  //     } else {\n  //       this[i].scrollTop = val\n  //     }\n  //   }\n  // }\n}\n\nconst $ = function (selector, context) {\n  return new ZxEditorQuery(selector, context)\n}\n\nexport default $\n","/**\n * Created by Capricorncd.\n * Date: 2019/04/15 13:14\n * Copyright © 2017-present, https://github.com/capricorncd\n */\nimport $, { ZxEditorQuery } from '../dom-class/index'\n\n/**\n * Cursor Class\n * @param $parent\n * @constructor\n */\nfunction CursorClass ($parent) {\n  // Limit focus range\n  this.$parent = $parent\n  this.selection = null\n  this.range = null\n  this.currentNode = null\n  this.timer = null\n  let $el = $parent.lastChild()\n  // init offset\n  this.offset = $el.text().length || 0\n  if ($el[0]) this.setRange($el[0], this.offset)\n}\n\n/**\n * prototype\n * @type {{constructor: CursorClass, init(*=): void, setRange(*=, *=): void, getRange(): *}}\n */\nCursorClass.prototype = {\n  /**\n   * constructor\n   */\n  constructor: CursorClass,\n\n  init () {\n    this.selection = window.getSelection()\n    try {\n      this.range = this.selection.getRangeAt(0)\n    } catch (e) {\n      this.range = new Range()\n    }\n  },\n\n  /**\n   * 设置或创建光标位置\n   * @param el\n   * @param offset\n   */\n  setRange (el, offset) {\n    if (el instanceof ZxEditorQuery) {\n      el = el[0]\n    }\n\n    if (this.selection === null) {\n      this.init()\n    } else {\n      // remove all range object\n      this.selection.removeAllRanges()\n    }\n\n    // 光标移动到到原来的位置加上新内容的长度\n    el = el || this.currentNode\n\n    if (el) {\n      // el: '<section>inner text.</section>'\n      let targetNode = el.childNodes[el.childNodes.length - 1] || el\n      // check img/video/audio\n      // console.log(targetNode.nodeName, this.offset)\n      if (/IMG|VIDEO|AUDIO/.test(targetNode.nodeName)) {\n        this.offset = 1\n        // get parentNode, can't set offset = 1 of IMG node.\n        targetNode = targetNode.parentNode\n      } else if (typeof offset === 'undefined') {\n        // get min offset, because offset cannot exceed the length of targetNode.textContent\n        this.offset = Math.min($(targetNode).text().length, this.offset)\n      } else {\n        this.offset = offset\n      }\n      this.range.setStart(targetNode, this.offset)\n      this.currentNode = el\n    }\n    // cursor start and end position is collapse\n    this.range.collapse(true)\n\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timer = null\n    }\n    // 延时执行，键盘自动收起后再触发focus\n    this.timer = setTimeout(() => {\n      // 插入新的光标对象\n      this.selection.addRange(this.range)\n    }, 100)\n  },\n\n  /**\n   * get cursor node in $parent\n   * @param needElement Want to get element node, not ZxEditorQuery object\n   * @return {*}\n   */\n  getCurrentNode (needElement) {\n    // 获取选定对象\n    // this.selection = window.getSelection()\n    // 设置最后光标对象\n    try {\n      this.range = this.selection.getRangeAt(0)\n    } catch (e) {\n      this.range = new Range()\n    }\n    this.currentNode = this.range.endContainer\n    this.offset = this.range.startOffset\n    // Check whether currentNode is in the this.$parent\n    let $currentNode = $(this.currentNode).findParentFrom(this.$parent)\n    let $current = $currentNode || this.$parent.lastChild()\n    return needElement ? $current[0] : $current\n  }\n}\n\nexport default CursorClass\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/21 22:42\n */\nimport $ from '../dom-class'\nimport util from '../util'\nimport ZxEditor from '../index'\n\nconst DEF_OPTS = {\n  head: null,\n  // className\n  className: '',\n  // head setup\n  headHeight: 44,\n  headLeftBtnClassName: '',\n  headLeftBtnText: '',\n  headTitle: 'Expansion Panel',\n  // height\n  height: 260,\n  // body内容\n  body: null,\n  // Used to distinguish ExpansionPanel instance\n  name: 'expansion-panel',\n  onHeadClick: function () {},\n  onBodyClick: function () {}\n}\n\n/**\n * ExpansionPanel\n * Extension panel fixed at the bottom of the editor\n * @param options\n * @param zxEditor ZxEditor instance\n * @constructor\n */\nfunction ExpansionPanel (options, zxEditor) {\n  if (!zxEditor instanceof ZxEditor) {\n    throw new TypeError(`new ExpansionPanel() parameter error, arguments[1] is no a ZxEditor instance.`)\n  }\n\n  // options\n  let opts = this.options = Object.assign({}, DEF_OPTS, options)\n\n  // editor instance\n  this.editorInstance = zxEditor\n\n  zxEditor.expansionPanels.push(this)\n\n  // visible\n  this.visible = false\n\n  // Used to distinguish ExpansionPanel instance\n  this.name = util.toHump(opts.name)\n\n  this.$head = $(`<div class=\"head-wrapper border-bottom ${opts.headAlign}\" style=\"height:${opts.headHeight}px;line-height:${opts.headHeight}px;\"><div class=\"l cur ${opts.headLeftBtnClassName}\">${opts.headLeftBtnText}</div>${opts.headTitle || ''}</div>`)\n\n  this.$body = $(`<div class=\"body-wrapper\" style=\"height:${opts.height - opts.headHeight}px;\"></div>`)\n\n  // node\n  this.$el = $(`<div class=\"zx-editor-expansion-panel border-top\"></div>`)\n\n  // click\n  // stop propagation\n  zxEditor.$eventHandlers[this.name] = {\n    $target: this.$el,\n    type: 'click',\n    handler: (e) => {\n      e.stopPropagation()\n    }\n  }\n  this.$el.on('click', zxEditor.$eventHandlers[this.name].handler)\n\n  if (opts.headHeight > 0) {\n    // custom head\n    if (opts.head) {\n      this.$head = $(opts.head)\n    } else {\n      // left btn\n      const $leftBtn = this.$head.find('.l')\n      zxEditor.$eventHandlers[this.name + 'HeadLeftBtn'] = {\n        $target: $leftBtn,\n        type: 'click',\n        handler: (e) => {\n          opts.onHeadClick('left-button', e, this)\n        }\n      }\n      $leftBtn.on('click', zxEditor.$eventHandlers[this.name + 'HeadLeftBtn'].handler)\n\n      const $switch = $(`<i class=\"switch\" style=\"width:${opts.headHeight}px;height:${opts.headHeight}px;\"></i>`)\n      this.$head.append($switch)\n      // switch event\n      zxEditor.$eventHandlers[this.name + 'HeadSwitch'] = {\n        $target: $switch,\n        type: 'click',\n        handler: (e) => {\n          opts.onHeadClick('switch', e, this)\n          this.hide()\n        }\n      }\n      $switch.on('click', zxEditor.$eventHandlers[this.name + 'HeadSwitch'].handler)\n    }\n\n    this.$el.append(this.$head)\n  }\n\n  // body\n  try {\n    this.$body.append($(opts.body))\n  } catch (e) {\n    throw e\n  }\n\n  this.$el.append(this.$body)\n\n  // append to $editor\n  zxEditor.$editor.append(this.$el)\n\n  // init\n  this.init(this.options)\n}\n\nExpansionPanel.prototype = {\n  /**\n   * constructor\n   */\n  constructor: ExpansionPanel,\n\n  /**\n   * init position\n   * Used to window.onresize\n   * @param options\n   */\n  init (options) {\n    options = options || this.options\n    let winHeight = window.innerHeight\n    this.$el.css({\n      height: `${options.height}px`,\n      top: winHeight + 'px'\n    })\n  },\n\n  /**\n   * show\n   */\n  show () {\n    if (!this.visible) {\n      this.$el.removeClass('out').addClass('in')\n      this.visible = true\n      this.editorInstance.emit('expansionPanelShow', this, this.editorInstance)\n    }\n  },\n\n  /**\n   * hide\n   */\n  hide () {\n    if (this.visible) {\n      this.$el.removeClass('in').addClass('out')\n      this.visible = false\n      this.editorInstance.emit('expansionPanelHide', this, this.editorInstance)\n    }\n  }\n}\n\nexport default ExpansionPanel\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/29 21:08\n */\nimport { document } from 'ssr-window'\nimport $ from '../../dom-class/index'\n\nexport function changeTag (tag) {\n\n  // same tag\n  if (this.$cursorNode.nodeName() === tag) return\n\n  let cursorNode = this.$cursorNode[0]\n\n  let childNodes = cursorNode.childNodes\n\n  let len = childNodes.length\n\n  // to ul\n  if (tag === 'ul') {\n    let ul = document.createElement('ul')\n    cloneAttrs(ul, cursorNode)\n    for (let i = 0; i < len; i++) {\n      ul.appendChild(createLi(childNodes[i].cloneNode(true)))\n    }\n    cursorNode.parentNode.replaceChild(ul, cursorNode)\n    // save current node\n    this.$cursorNode = $(ul)\n    return\n  }\n\n  // change ul\n  if (cursorNode.nodeName === 'UL') {\n    let li, el\n    for (let i = 0; i < len; i++) {\n      li = childNodes[i].cloneNode(true)\n      cloneAttrs(li, cursorNode)\n      el = this.changeNodeName(li, tag)\n      $(el).insertBefore(this.$cursorNode)\n    }\n    // remove old ul\n    this.$cursorNode.remove()\n    this.$cursorNode = $(el)\n    return\n  }\n\n  this.$cursorNode.changeNodeName(tag)\n  this.cursor.setRange(this.$cursorNode)\n}\n\nfunction createLi (child) {\n  let li = document.createElement('li')\n  li.appendChild(child)\n  return li\n}\n\nfunction cloneAttrs (target, source) {\n  let style, id, className\n  style = source.getAttribute('style')\n  id = source.id\n  className = source.className\n  if (style) target.setAttribute('style', style)\n  if (id) target.id = id\n  if (className) target.className = className\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/21 10:33\n */\nexport const IPHONEX_BOTTOM_OFFSET_HEIGHT = 34\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/27 21:11\n */\nimport $ from '../../dom-class'\nimport { createVdom } from '../../dom-class/helper'\nimport { changeTag } from './helper'\nimport { IPHONEX_BOTTOM_OFFSET_HEIGHT } from '../../config'\n\n// COLOR\nconst DEF_COLORS = [\n  '#333',\n  '#d0d0d0',\n  '#ff583d',\n  '#fdaa25',\n  '#44c67b',\n  '#14b2e0',\n  '#b065e2'\n]\n\n/**\n * create color vnode\n * @param colors\n * @return Object\n */\nfunction createColorVNode (colors) {\n  let arr = []\n  colors.forEach((color, i) => {\n    if (/^#\\w{3,6}$/.test(color)) {\n      arr.push({\n        tag: 'dd',\n        attrs: {\n          class: i === 0 ? 'active' : '',\n          'data-color': formatColorHexadecimal(color.toLowerCase())\n        },\n        child: [\n          {\n            tag: 'i',\n            attrs: {\n              style: `background:${color}`\n            }\n          }\n        ]\n      })\n    }\n  })\n  return arr\n}\n\nfunction formatColorHexadecimal (hex) {\n  let len = hex.length\n  return len === 7 ? hex : `#${hex[1]}${hex[1]}${hex[2]}${hex[2]}${hex[3]}${hex[3]}`\n}\n\n/**\n * text style panel\n * @param options\n * @return {{name: string, className: string, events: {type: string, handler: events.handler}}}\n */\nexport function styleExpansionPanel (options) {\n\n  const zxEditor = this\n\n  const COLORS = options.textStyleColors.length ? options.textStyleColors : DEF_COLORS\n\n  // dom structure\n  let panelBodyChild = [\n    // style\n    {\n      tag: 'dl',\n      attrs: {\n        class: '__style-wrapper border-bottom'\n      },\n      child: [\n        {\n          tag: 'dd',\n          attrs: {\n            style: 'font-weight: 800;',\n            'data-style': 'fontWeight:800'\n          },\n          child: ['B']\n        },\n        {\n          tag: 'dd',\n          attrs: {\n            style: 'font-style: italic;',\n            'data-style': 'fontStyle:italic'\n          },\n          child: ['I']\n        },\n        {\n          tag: 'dd',\n          attrs: {\n            style: 'text-decoration: line-through;',\n            'data-style': 'textDecoration:line-through'\n          },\n          child: ['abc']\n        }\n      ]\n    },\n    // color\n    {\n      tag: 'dl',\n      attrs: {\n        class: '__color-wrapper border-bottom'\n      },\n      child: createColorVNode(COLORS)\n    },\n    // tag\n    {\n      tag: 'dl',\n      attrs: {\n        class: '__tag-wrapper'\n      },\n      child: [\n        {\n          tag: 'dd',\n          attrs: {\n            class: '__h2',\n            'data-tag': 'h2'\n          },\n          child: ['大标题', { tag: 'i' }]\n        },\n        {\n          tag: 'dd',\n          attrs: {\n            class: '__h4',\n            'data-tag': 'h4'\n          },\n          child: ['小标题', { tag: 'i' }]\n        },\n        {\n          tag: 'dd',\n          attrs: {\n            class: '__section active',\n            'data-tag': 'section'\n          },\n          child: ['正文', { tag: 'i' }]\n        },\n        {\n          tag: 'dd',\n          attrs: {\n            class: '__blockquote',\n            'data-tag': 'blockquote'\n          },\n          child: ['引用', { tag: 'i' }]\n        },\n        {\n          tag: 'dd',\n          attrs: {\n            class: '__ul',\n            'data-tag': 'ul'\n          },\n          child: ['无序列表', { tag: 'i' }]\n        }\n      ]\n    }\n  ]\n\n\n  let panelBody = createVdom({\n    tag: 'div',\n    attrs: {\n      class: 'text-style-outer-wrapper'\n    },\n    child: panelBodyChild\n  })\n\n  let $panelBody = $(panelBody)\n\n  // instance text style\n  this.textStylePanel = new this.ExpansionPanel({\n    headLeftBtnText: options.textStyleHeadLeftBtnText,\n    headTitle: options.textStyleTitle,\n    headAlign: options.textStyleHeadAlign,\n    body: $panelBody,\n    onHeadClick: handleHeadClick\n  }, this)\n\n  // handle events\n  // style\n  const $styles = $panelBody.find('.__style-wrapper').children()\n  $styles.on('click', function () {\n    let style = $(this).data('style').split(':')\n    let key = style[0]\n    let cursorNode = zxEditor.$cursorNode[0]\n    cursorNode.style[key] = cursorNode.style[key] === style[1] ? '' : style[1]\n    zxEditor.cursor.setRange()\n  })\n\n  // color\n  const $colorsParent = $panelBody.find('.__color-wrapper')\n  const $colors = $colorsParent.children()\n  $colors.on('click', function () {\n    let $el\n    for (let i = 0; i < $colors.length; i++) {\n      $el = $($colors[i])\n      if ($el[0] === this && !$el.hasClass('active')) {\n        $el.addClass('active')\n        zxEditor.$cursorNode.css('color', $el.data('color'))\n      } else if ($el.hasClass('active')) {\n        $el.removeClass('active')\n      }\n    }\n    zxEditor.cursor.setRange()\n  })\n\n  // tag\n  const $tagsParent = $panelBody.find('.__tag-wrapper')\n  const $tags = $tagsParent.children()\n  $tags.on('click', function () {\n    if ($(this).hasClass('active')) return\n    let tag = $(this).data('tag')\n    let $el\n    for (let i = 0; i < $tags.length; i++) {\n      $el = $($tags[i])\n      if ($el[0] === this) {\n        // add active class name\n        $el.addClass('active')\n        // change tag\n        changeTag.call(zxEditor, tag)\n      } else if ($el.hasClass('active')) {\n        $el.removeClass('active')\n      }\n    }\n  })\n\n  if (this.isIPhoneX) {\n    $tagsParent.css('margin-bottom', IPHONEX_BOTTOM_OFFSET_HEIGHT + 'px')\n  }\n\n  // extend method\n  /**\n   * reset active state\n   * when content onClick and onKeyup code === 13\n   */\n  this.textStylePanel.resetActiveState = () => {\n    let $cursorNode = this.cursor.getCurrentNode()\n\n    // check tag\n    let tag = $cursorNode.nodeName()\n    setTagInPanel(tag)\n\n    // check color\n    let color = this.rgbToHex($cursorNode.css('color'))\n    setColorInPanel(color)\n  }\n\n  /**\n   * set tag in panel\n   * @param tag\n   */\n  function setTagInPanel (tag) {\n    let $activeTag = $tagsParent.find('.active')\n    if ($activeTag.data('tag') !== tag) {\n      $activeTag.removeClass('active')\n      $tagsParent.find(`.__${tag}`).addClass('active')\n    }\n  }\n\n  /**\n   * set color in panel\n   * @param color\n   */\n  function setColorInPanel (color) {\n    let $activeColor = $colorsParent.find('.active')\n    if ($activeColor.data('color') !== color) {\n\n      $activeColor.removeClass('active')\n\n      let $tmp\n      for (let i = 0; i < $colors.length; i++) {\n        $tmp = $($colors[i])\n        if ($tmp.data('color') === color) {\n          $tmp.addClass('active')\n          break\n        }\n      }\n    }\n  }\n\n  /**\n   * handle head click\n   * @param type\n   */\n  function handleHeadClick (type) {\n    // clear style\n    if (type === 'left-button') {\n      // clear style\n      let currentNode = zxEditor.$cursorNode[0]\n      currentNode.className = ''\n      currentNode.setAttribute('style', '')\n      if (currentNode.nodeName !== 'SECTION') {\n        zxEditor.$cursorNode = $(zxEditor.changeNodeName(currentNode, 'section'))\n      }\n      // reset text style expansion\n      setColorInPanel(COLORS[0])\n      setTagInPanel('section')\n      // set Range\n      zxEditor.cursor.setRange(zxEditor.$cursorNode)\n    }\n  }\n\n  return {\n    name: 'text-style',\n    className: 'text-style-btn',\n    events: {\n      type: 'click',\n      handler: () => {\n        this.textStylePanel.show()\n      }\n    }\n  }\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/05/04 00:09\n */\nimport { styleExpansionPanel } from './style-expansion-panel'\n\nexport function textStyle () {\n  this.toolbar.addButton(styleExpansionPanel.call(this, this.options))\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/27 21:19\n */\nimport $ from '../../dom-class/index'\n\nexport function selectPictureBtn () {\n  const _this = this\n  const options = this.options\n  /**\n   * *******************************************\n   * select picture\n   * image file handler\n   * *******************************************\n   */\n    // select picture\n  let $selectPictureLabel = $('<label class=\"toolbar-icon-pic\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;\"></label>')\n  let $selectPictrueInput = $('<input type=\"file\" accept=\"image/*\" style=\"display:none\">')\n  $selectPictureLabel.append($selectPictrueInput)\n  let input = $selectPictrueInput[0]\n\n  // register selectPictureInputClick\n  this.$eventHandlers['selectPictureInputClick'] = {\n    $target: $selectPictrueInput,\n    type: 'click',\n    handler () {\n      input.value = ''\n    },\n    capture: false\n  }\n\n  // image section template\n  let imageSectionTemplate = /^<\\w+\\b.*<\\/\\w+>$/.test(options.imageSectionTemp) ? options.imageSectionTemp : `<section><img src=\"{url}\"></section>`\n\n  // register selectPictureInputChange\n  let imageOptions = Object.assign({}, _this.options, {\n    width: options.imageMaxWidth\n  })\n  this.$eventHandlers['selectPictureInputChange'] = {\n    $target: $selectPictrueInput,\n    type: 'change',\n    handler (e) {\n      let file = input.files[0]\n      _this.emit('selectPictureInputChange', file, e, _this)\n\n      // customize Picture Handler\n      if (options.customizePictureHandler) return\n\n      // handler picture\n      _this.fileToBase64(file, imageOptions).then(res => {\n        // console.log(res)\n        let $el = $(imageSectionTemplate.replace('{url}', res.base64))\n        // set attribute\n        $el.find('img').attr({\n          id: 'zxEditor_img_' + (+new Date()),\n          alt: file.name\n        })\n        // insert to $content\n        _this.insertElm($el)\n      }).catch(e => {\n        _this.emit('error', e, 'fileToBase64')\n      })\n    },\n    capture: false\n  }\n\n  this.toolbar.addButton({\n    name: 'select-picture',\n    el: $selectPictureLabel\n  })\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/21 10:25\n */\nimport $ from '../dom-class'\nimport util from '../util'\nimport { window } from 'ssr-window'\nimport { IPHONEX_BOTTOM_OFFSET_HEIGHT } from '../config'\n\n// default button options\nconst DEF_BTN_OPTS = {\n  name: '',\n  // button className\n  className: '',\n  // ElementHTML or $()\n  el: null,\n  // innerHTML\n  innerHtml: '',\n  // style\n  style: '',\n  // obj{type: 'click', handler: fn, capture: false} or array[obj1, obj2]\n  events: null\n}\n\nfunction Toolbar (options, zxEditor) {\n  // zxEditor instance\n  this.editorInstance = zxEditor\n\n  // options\n  this.options = options\n\n  // visible\n  this.visible = options.toolbarBeenFixed\n\n  // create element\n  this.height = options.toolbarHeight\n  this.$el = $(`<div class=\"zx-editor-toolbar-wrapper border-top ${this.visible ? 'in' : 'out'}\" style=\"height:${this.height + (util.isIPhoneX ? IPHONEX_BOTTOM_OFFSET_HEIGHT : 0)}px;\"><dl class=\"inner-wrapper\" style=\"height:${this.height}px;\"></dl></div>`)\n\n  // append to $editor\n  zxEditor.$editor.append(this.$el)\n\n  // init\n  this.init(options)\n}\n\nToolbar.prototype = {\n  /**\n   * constructor\n   */\n  constructor: Toolbar,\n\n  /**\n   * Used to window.onresize\n   * @param options\n   */\n  init (options) {\n    options = options || this.options\n    let winHeight = window.innerHeight\n    this.$el.css({\n      top: winHeight + 'px'\n    })\n    if (this.visible) this.editorInstance.emit('toolbarShow', this, this.editorInstance)\n  },\n\n  /**\n   * show\n   */\n  show () {\n    if (!this.visible) {\n      // change className\n      this.$el.removeClass('out').addClass('in')\n      this.visible = true\n      this.editorInstance.emit('toolbarShow', this, this.editorInstance)\n    }\n  },\n\n  /**\n   * hide\n   */\n  hide () {\n    if (this.visible) {\n      // change className\n      this.$el.removeClass('in').addClass('out')\n      this.visible = false\n      this.editorInstance.emit('toolbarHide', this, this.editorInstance)\n    }\n  },\n\n  /**\n   * add button\n   * @param opts\n   * @param index Insert index\n   */\n  addButton (opts, index) {\n    // params\n    let params = Object.assign({}, DEF_BTN_OPTS, opts)\n\n    // name\n    if (!params.name) params.name = 'toolbar-btn-' + (+new Date())\n\n    // create $node\n    let $btn = $(`<dd class=\"icon-item\" data-name=\"${params.name}\" style=\"${params.style}\"></dd>`)\n    // handle el\n    if (params.el && typeof params.el === 'object') {\n      $btn.append($(params.el))\n    } else {\n      // handle innerHtml\n      $btn.html(params.innerHtml)\n    }\n\n    // className\n    if (params.className) {\n      $btn.addClass(params.className)\n    }\n\n    // style\n    let css = {}\n    if (this.options.toolbarHeight) {\n      css.width = css.height = this.options.toolbarHeight + 'px'\n    }\n    $btn.css(css)\n\n    // insert to document\n    let $btns = this.$el.find('.inner-wrapper').children()\n\n    if (typeof index === 'number' && index < $btns.length) {\n      $btn.insertBefore($btns[index])\n    } else {\n      this.$el.find('.inner-wrapper').append($btn)\n    }\n\n    // events\n    if (params.events) {\n      let events\n      if (util.isObject(params.events)) {\n        events = []\n        events.push(params.events)\n      } else if (Array.isArray(params.events)) {\n        events = params.events\n      }\n      // register events\n      let eventHandlerKey\n      const $eventHandlers = this.editorInstance.$eventHandlers\n      events.forEach(item => {\n        if (item && typeof item.type === 'string' && typeof item.handler === 'function') {\n          eventHandlerKey = `toolbarBtnEvent_${item.name}`\n          $eventHandlers[eventHandlerKey] = {\n            $target: $btn,\n            type: item.type,\n            handler: item.handler.bind(this.editorInstance),\n            capture: typeof item.capture === 'boolean' ? item.capture : false\n          }\n          $btn.on(item.type, $eventHandlers[eventHandlerKey].handler, $eventHandlers[eventHandlerKey].capture)\n        } else {\n          throw new TypeError(`Function addButton(opts), opts.events's parameter error.`)\n        }\n      })\n    }\n  }\n}\n\nexport default Toolbar\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/15 21:52\n */\nimport util from '../util'\n\n/**\n * 获取剪切文本内容\n * @param e event\n * @return {Promise<any>}\n */\nexport function getPasteText (e) {\n  return new Promise(resolve => {\n    let clipboardData = e.clipboardData\n    let pasteStr = ''\n    if (!clipboardData) {\n      resolve('')\n      return\n    }\n    let items = clipboardData.items\n    // console.log(e)\n    // console.log(clipboardData)\n    // console.log(items)\n    if (items && items.length > 0) {\n      let len = items.length\n      let count = 0\n      let i, item\n      for (i = 0; i < len; i++) {\n        item = items[i]\n        // 获取文本内容\n        if (/^text\\/plain/.test(item.type)) {\n          item.getAsString(str => {\n            pasteStr += str\n            counter(count, len)\n          })\n        } else {\n          counter(count, len)\n        }\n      }\n    } else {\n      resolve('')\n    }\n\n    /**\n     * 计数\n     * @param count\n     * @param len\n     */\n    function counter(count, len) {\n      count++\n      if (count === len) resolve(util.strip(pasteStr))\n    }\n  })\n}\n","/**\n * Create by capricorncd\n * 2018/5/30 0030.\n */\n/**\n * on\n * @param notifyName\n * @param fn\n */\nfunction on (notifyName, fn) {\n  if (!notifyName\n    || typeof notifyName !== 'string'\n    || !fn\n    || typeof fn !== 'function') return\n  if (!this.customEvents[notifyName]) {\n    this.customEvents[notifyName] = []\n  }\n  this.customEvents[notifyName].push(fn)\n}\n\n/**\n * emit\n * @param notifyName\n */\nfunction emit (notifyName) {\n  let notifyArr = this.customEvents[notifyName]\n  if (!notifyArr) return\n  let args = Array.prototype.slice.call(arguments, 1)\n  for (let i = 0; i < notifyArr.length; i++) {\n    try {\n      notifyArr[i].apply(null, args)\n    } catch (e) {\n      this.emit('error', e, 'emit')\n    }\n  }\n}\n\n/**\n * off\n * @param notifyName\n */\nfunction off (notifyName, fn) {\n  if (this.customEvents[notifyName]) {\n    if (typeof fn === 'function' && this.customEvents[notifyName]) {\n      let index = this.customEvents[notifyName].findIndex(item => item === fn)\n      if (index >= 0) this.customEvents[notifyName].splice(index, 1)\n    } else {\n      this.customEvents[notifyName] = null\n      delete this.customEvents[notifyName]\n    }\n  }\n}\n\nexport {\n  on,\n  emit,\n  off\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/24 21:37\n */\nimport { document } from 'ssr-window'\nimport util from \"../util\";\n\nexport function getImageInfo (base64, file, opts, callback) {\n  let img = document.createElement('img')\n  img.src = base64\n  img.setAttribute('alt', file.name)\n  // 加载图片\n  img.onload = function () {\n    let defaultData = {\n      element: img,\n      base64,\n      width: img.naturalWidth || img.width,\n      height: img.naturalHeight || img.height,\n      type: file.type,\n      size: file.size,\n      name: file.name,\n      file\n    }\n    callback(null, opts.orientation > 1 ? rotateAndToBase64(defaultData, opts.orientation) : defaultData)\n  }\n\n  img.onerror = callback\n}\n\n/**\n * Decide whether the picture is rotated or not according to 'opts.orientation' value\n * @param raw\n * @param type\n * @returns {Object}\n */\nfunction rotateAndToBase64 (raw, orientation) {\n  let canvas = document.createElement('canvas')\n  let ctx = canvas.getContext('2d')\n  let img = raw.element\n  let imgWidth = raw.width\n  let imgHeight = raw.height\n  canvas.width = imgWidth\n  canvas.height = imgHeight\n  // rotate image\n  switch(orientation) {\n    // 90deg\n    case 6:\n      canvas.width = imgHeight\n      canvas.height = imgWidth\n      ctx.rotate(Math.PI / 2)\n      // (0, -imgHeight)\n      ctx.drawImage(img, 0, -imgHeight, imgWidth, imgHeight)\n      break\n    // 180deg\n    case 3:\n      ctx.rotate(Math.PI)\n      ctx.drawImage(img, -imgWidth, -imgHeight, imgWidth, imgHeight)\n      break;\n    // -90(270)deg\n    case 8:\n      canvas.width = imgHeight\n      canvas.height = imgWidth\n      ctx.rotate(3 * Math.PI / 2)\n      ctx.drawImage(img, -imgWidth, 0, imgWidth, imgHeight)\n      break\n    default:\n      ctx.drawImage(img, 0, 0, imgWidth, imgHeight)\n  }\n  let base64 = canvas.toDataURL(raw.type)\n  img.src = base64\n\n  return Object.assign(raw, {\n    element: canvas,\n    base64,\n    width: canvas.width,\n    height: canvas.height\n  })\n}\n\n/**\n * 创建Canvas\n * @param el Image object or Canvas element\n * @param p clip options\n * @returns {Element}\n */\nexport function createCanvas (el, p) {\n  const canvas = document.createElement('canvas')\n  canvas.width = p.cw\n  canvas.height = p.ch\n  const ctx = canvas.getContext('2d')\n  // 操作过于频繁，iPhone部分手机会获取不到ctx，is null\n  // 下面代码会抛出异常\n  ctx.drawImage(el, p.sx, p.sy, p.sw, p.sh, 0, 0, canvas.width, canvas.height)\n  return canvas\n}\n\n/**\n * 缩放比列\n * @param {Number} numerator\n * @param {Number} denominator\n */\nfunction ratio (numerator, denominator) {\n  return parseInt(numerator / denominator * 10000) / 10000\n}\n\n/**\n * Calculate the position and size of the generated image clipping\n * @param {Number} iw // image width\n * @param {Number} ih // image height\n * @param {Object} opts\n */\nexport function computeCropInfo (iw, ih, opts) {\n  // target image width, height\n  let targetWidth = util.int(opts.width)\n  let targetHeight = util.int(opts.height)\n\n  // image width or height, less than target width or height\n  // don't resize\n  if (!opts.forceImageResize && (targetWidth > 0 && iw < targetWidth)\n    && (targetHeight > 0 && ih < targetHeight)) {\n    return {\n      sx: 0,\n      sy: 0,\n      sw: iw,\n      sh: ih,\n      scaling: 1,\n      cw: iw,\n      ch: ih\n    }\n  }\n\n  // scaling\n  let scaling = 1\n\n  // Pictures begin to crop in x, y coordinates\n  let sx = 0\n  let sy = 0\n  // canvas\n  let canvasWidth = iw\n  let canvasHieght = ih\n  // Picture Size after Equal Ratio Scaling\n  let sw = 0\n  let sh = 0\n\n  // Scale to the right size, then cut in the middle\n  if (targetWidth > 0 && targetHeight > 0) {\n    // The size of canvas is to set the size for cutting\n    canvasWidth = targetWidth\n    canvasHieght = targetHeight\n\n    // Adjust the size of the picture according to the target width: the width of the picture equals the width of the clipping frame\n    sw = targetWidth\n    sh = Math.floor(targetWidth * ih / iw)\n\n    scaling = ratio(iw, targetWidth)\n\n    // Picture height beyond the clipping box, can be normal clipping\n    if (sh >= targetHeight) {\n      sx = 0\n      sy = util.int((sh - targetHeight) / 2 * scaling)\n    }\n    // To satisfy the clipping requirement, we need to resize: image height === clipping frame height\n    else {\n      scaling = ratio(ih, targetHeight)\n      sw = Math.floor(targetHeight * iw / ih)\n      sh = targetHeight\n      sx = util.int((sw - targetWidth) / 2 * scaling)\n      sy = 0\n    }\n\n  }\n  // Zoom Picture Code **********************************\n  // Only width is set\n  else if (targetWidth > 0) {\n    scaling = ratio(iw, targetWidth)\n    canvasWidth = targetWidth\n    canvasHieght = Math.floor(targetWidth * ih / iw)\n  }\n  // Only height is set\n  else if (targetHeight > 0) {\n    scaling = ratio(ih, targetHeight)\n    canvasWidth = Math.floor(targetHeight * iw / ih)\n    canvasHieght = targetHeight\n  }\n\n  return {\n    sx: sx,\n    sy: sy,\n    sw: util.int(canvasWidth * scaling),\n    sh: util.int(canvasHieght * scaling),\n    scaling: scaling,\n    cw: canvasWidth,\n    ch: canvasHieght\n  }\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/24 21:13\n */\nimport { window } from 'ssr-window'\nimport { getImageInfo, computeCropInfo, createCanvas } from './helper'\n\nconst DEF_OPTIONS = {\n  width: 0,\n  heigth: 0,\n  imageMaxSize: null,\n  ignoreGif: true,\n  forceResize: false\n}\n\n/**\n * base64 data to Blob\n * @param base64Data\n * @return {Blob}\n */\nfunction base64ToBlobData (base64Data) {\n  // base64数据格式:\n  // \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/2wBDAAkGB+wgHBgkIBwgKCgkLDRYPDQw//9k=\"\n  let type, onlyData\n  if (/^data:(\\w+\\/\\w+);base64,(.+)/.test(base64Data)) {\n    type = RegExp.$1\n    onlyData = RegExp.$2\n  } else {\n    throw new TypeError(`base64ToBlobData(base64Data), base64Data non-base64 data!`)\n  }\n\n  let data = window.atob(onlyData)\n  let ia = new Uint8Array(data.length)\n  for (let i = 0; i < data.length; i++) {\n    ia[i] = data.charCodeAt(i)\n  }\n  return new Blob([ia], {type: type})\n}\n\n/**\n * file to base64 data\n * @param file\n * @param opts\n * @return {Promise<any>}\n */\nfunction fileToBase64 (file, opts) {\n  return new Promise((resolve, reject) => {\n    if (!file || !file instanceof File) {\n      throw new TypeError(`file is not a File object`)\n    }\n\n    let options = Object.assign({}, DEF_OPTIONS, opts)\n\n    // check file type\n    if (!/image\\/.*/i.test(file.type)) {\n      reject(new TypeError(`\"${file.name}\" is not Image File!`))\n      return\n    }\n\n    // rotate image\n    if (typeof window.EXIF === 'undefined') {\n      options.orientation = 0\n      handleFile(file, options).then(resolve).catch(reject)\n    } else {\n      window.EXIF.getData(file, function () {\n        let info = window.EXIF.getAllTags(this) || {}\n        // Shooting direction\n        options.orientation = info.Orientation\n        handleFile(file, options).then(resolve).catch(reject)\n      })\n    }\n  })\n}\n\n/**\n * to blob url\n * @param blob Blob数据\n * @returns {*}\n */\nfunction blobToUrl (blob) {\n  return window.URL.createObjectURL(blob)\n}\n\nfunction handleFile (file, opts) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    reader.readAsDataURL(file)\n    reader.onload = function () {\n      // get image info\n      getImageInfo(this.result, file, opts, (e, raw) => {\n        if (e) {\n          reject(e)\n          return\n        }\n        // check gif\n        if (file.type === 'image/gif' && opts.ignoreGif) {\n          raw.data = file\n          raw.url = blobToUrl(file)\n          raw.raw = raw\n          resolve(raw)\n          return\n        }\n        let result = handleImageData(raw, opts)\n        // check file size\n        if (opts.imageMaxSize > 0 && result.size / 1024 > opts.imageMaxSize) {\n          reject(new RangeError(`File size \"${result.size / 1024}\" out of range, limit is ${opts.imageMaxSize}Kib`))\n          return\n        }\n        resolve(result)\n      })\n    }\n\n    reader.onerror = reject\n  })\n}\n\n/**\n * Processing picture data, clipping and compression\n * @param raw\n * @param opts\n * @private\n */\nfunction handleImageData (raw, opts) {\n  // file type\n  let dataType = raw.type || raw.file.type\n\n  // Calculate the position and size of zooming or clipping pictures\n  let res = computeCropInfo(raw.width, raw.height, opts)\n\n  // image or canvas\n  let el = raw.element\n\n  let scaling = 2\n  let sw = res.sw\n  let sh = res.sh\n  let sx = res.sx\n  let sy = res.sy\n\n  if (res.scaling > scaling) {\n    scaling = res.scaling\n    while (scaling > 2) {\n      el = createCanvas(el, {\n        cw: res.cw * scaling,\n        ch: res.ch * scaling,\n        sx: sx,\n        sy: sy,\n        sw: sw,\n        sh: sh\n      })\n      sw = el.width\n      sh = el.height\n      sx = sy = 0\n      scaling -= 1\n    }\n  }\n  el = createCanvas(el, {\n    cw: res.cw,\n    ch: res.ch,\n    sx: sx,\n    sy: sy,\n    sw: sw,\n    sh: sh\n  })\n\n  let base64 = el.toDataURL(dataType)\n  let blob = base64ToBlobData(base64)\n\n  return {\n    element: el,\n    type: dataType,\n    width: res.cw,\n    height: res.ch,\n    data: blob,\n    base64,\n    size: blob.size,\n    url: blobToUrl(blob),\n    // 原始图片数据\n    raw\n  }\n}\n\nexport {\n  fileToBase64,\n  blobToUrl,\n  base64ToBlobData\n}\n","/**\n * Created by Capricorncd.\n * Date: 2019/04/12 11:12\n * Copyright © 2017-present, https://github.com/capricorncd\n */\n/**\n * ***********************************************\n * Notes:\n * 1. The property or variables prefixed $ are ZxEditorQuery instance, or related to them\n * ***********************************************\n */\nimport $ from './dom-class/index'\nimport CursorClass from './cursor-class/index'\nimport ExpansionPanel from './expansion-panel/index'\nimport util from './util/index'\nimport { initDom } from './init/init-dom'\nimport { initStyle } from './init/init-style'\nimport { handleEvents } from './events/index'\nimport { extendPrototypes } from './init/extend-prototype'\nimport { base64ToBlobData } from './image-handler/index'\n\nconst DEF_OPTIONS = {\n  // 内容是否可以被编辑\n  editable: true,\n  // 编辑器输入内容绝对定位\n  fixed: false,\n  // editor min height\n  // minHeight: window.innerHeight,\n  // style\n  placeholder: '',\n  placeholderColor: '',\n  lineHeight: 1.5,\n  // paragraph tail spacing, default 10px\n  paragraphTailSpacing: '',\n  cursorColor: '',\n  // iphone会自动移动，难控制\n  offsetTop: 30,\n  // 位置检测，输入可视区域元素移动速度\n  speed: 0,\n  /**\n   * ******************************\n   * toolbar options\n   * ******************************\n   */\n  // Has the toolbar been fixed?\n  toolbarBeenFixed: true,\n  toolbarHeight: 50,\n  // buttons name, and order\n  toolbarBtns: ['select-picture', 'text-style'],\n  /**\n   * ******************************\n   * image options\n   * ******************************\n   */\n  // customize Picture Handler\n  customizePictureHandler: false,\n  // image max width\n  imageMaxWidth: 720,\n  // image max size, unit Kib, default 20M\n  imageMaxSize: 20480,\n  // template\n  imageSectionTemp: `<section class=\"child-is-picture\"><img src=\"{url}\"></section>`,\n  // GIF pictures are not processed\n  ignoreGif: true,\n  // Force the width/height of the picture, even if the width/height of the picture\n  // is smaller than the target width/height\n  forceImageResize: false,\n  /**\n   * ******************************\n   * text style options\n   * ******************************\n   */\n  // text style, value ['#333', '#f00', ...]\n  textStyleColors: [],\n  textStyleTitle: 'Set Style',\n  textStyleHeadLeftBtnText: 'Clear style',\n  textStyleHeadAlign: 'center',\n  /**\n   * ******************************\n   * color options\n   * ******************************\n   */\n  mainColor: '',\n  // border color\n  borderColor: ''\n}\n\nfunction ZxEditor (selector, _options) {\n  if (!this instanceof ZxEditor) {\n    throw new Error('ZxEditor is a constructor and should be called with the `new` keyword')\n  }\n  /**\n   * ***************************************************\n   * check selector\n   * ***************************************************\n   */\n  this.$wrapper = $(selector)\n\n  if (!this.$wrapper[0]) {\n    throw new Error(`Cann't found '${selector}' Node in document!`)\n  }\n\n  // version\n  this.version = '__VERSION__'\n\n  // ZxEditorQuery instance\n  this.$ = $\n\n  this.ExpansionPanel = ExpansionPanel\n\n  // options\n  this.options = Object.assign(DEF_OPTIONS, _options)\n  this.init(this.options)\n}\n\nZxEditor.prototype = {\n\n  constructor: ZxEditor,\n\n  init (options) {\n    options = options || this.options\n\n    /**\n     * ***************************************************\n     * event listeners\n     * or expansionPanel instance\n     * ***************************************************\n     */\n    // $().on, $().off, $().trigger\n    this.$eventHandlers = {}\n    // this.on, this.off, this.emit\n    this.customEvents = {}\n    // extend prototype\n    extendPrototypes(ZxEditor)\n    // expansionPanel instances\n    this.expansionPanels = []\n\n    /**\n     * ***************************************************\n     * create dom\n     * ***************************************************\n     */\n    initDom.call(this, options)\n\n    /**\n     * ***************************************************\n     * style and placeholder\n     * ***************************************************\n     */\n    initStyle.call(this, options)\n\n    /**\n     * ***************************************************\n     * cursor\n     * ***************************************************\n     */\n    this.cursor = new CursorClass(this.$content)\n\n    this.$cursorNode = this.cursor.getCurrentNode()\n\n    /**\n     * ***************************************************\n     * event: last\n     * ***************************************************\n     */\n    handleEvents.call(this)\n  },\n  /**\n   * 插入元素或字符串\n   * @param el\n   */\n  insertElm (el) {\n    // string\n    if (!el) return\n    // 光标元素及偏移量\n    let $cursorNode = this.$cursorNode\n\n    let newRangeEl, newRangeOffset\n    /**\n     * string\n     */\n    if (typeof el === 'string') {\n      // 光标所在元素内容为空\n      if ($cursorNode.isEmpty()) {\n        $cursorNode.text(el)\n        newRangeEl = $cursorNode\n        newRangeOffset = el.length\n      } else if ($cursorNode.children().every($item => $item.isTextNode())) {\n        let rangeOffset = this.cursor.offset\n        let rangeNodeStr = $cursorNode.text()\n        let tmpStr = rangeNodeStr.substr(0, rangeOffset) + el + rangeNodeStr.substr(rangeOffset)\n        // $section = $cursorNode.closest('section')\n        $cursorNode.text(tmpStr)\n        newRangeEl = $cursorNode\n        newRangeOffset = el.length + rangeOffset\n      } else {\n        // 创建一个section\n        let $newEl = $(`<section>${el}</section>`)\n        // 插入到childIndex后\n        $newEl.insertAfter($cursorNode)\n        newRangeEl = $newEl\n        newRangeOffset = el.length\n      }\n    }\n    /**\n     * 插入元素为：非文本\n     */\n    else {\n      let $el = $(el)\n      let $elm\n      for (let i = 0; i < $el.length; i++) {\n        $elm = $($el[i])\n        let nodeName = $elm.nodeName()\n        // SECTION\n        if (nodeName !== 'section') {\n          if ($elm.nodeType() === 1 && !/video|img|audio/.test(nodeName)) {\n            $elm.changeNodeName('section')\n          } else {\n            let $tmp = $(`<section></section>`)\n            $elm = $tmp.append($elm)\n          }\n        }\n        if ($cursorNode.isEmpty()) {\n          // siblings is empty\n          if ($cursorNode.next()[0] && $cursorNode.next().isEmpty()) {\n            $cursorNode.replace($elm)\n          } else {\n            $elm.insertBefore($cursorNode)\n          }\n        } else {\n          $elm.insertAfter($cursorNode)\n        }\n        // 判断$el是否有下一个节点，有：光标指向el结束，无：则插入空行，并移动光标\n        let next = $elm.next()[0]\n        if (next) {\n          newRangeEl = $elm\n          newRangeOffset = $elm.isTextNode() ? $elm.text().length : 0\n        } else {\n          let $section = $(`<section><br></section>`)\n          this.$content.append($section)\n          newRangeEl = $section\n          newRangeOffset = 0\n        }\n      }\n    }\n    this._checkChildSection()\n    this.$content.trigger('input')\n    console.log(newRangeEl, newRangeOffset)\n    this.cursor.setRange(newRangeEl, newRangeOffset)\n  },\n\n  /**\n   * 插入空行\n   */\n  insertBlankLine () {\n    let $el = $(`<section><br></section>`)\n    this.insertElm($el)\n    this.cursor.setRange($el, 0)\n  },\n\n  /**\n   * 检查内容是否为空\n   * @private\n   */\n  _checkEmpty () {\n    let $el = this.$content\n    if ($el.isEmpty()) {\n      $el.addClass('is-empty')\n    } else if ($el.hasClass('is-empty')) {\n      $el.removeClass('is-empty')\n    }\n  },\n\n  /**\n   * 检查一级子元素，nodeName是否为(SECTION|H1|H2|H3|H4|BLOCKQUOTE|UL)\n   * 否：则替换为section标签，或者放入section标签内\n   * @private\n   */\n  _checkChildSection () {\n    if (!this.$cursorNode) this.$cursorNode = this.cursor.getCurrentNode()\n    let cursorNode = this.$cursorNode[0]\n    let isCursorNode = false\n    const parent = this.$content[0]\n    let childNodes = parent.childNodes\n    let el\n    for (let i = 0; i < childNodes.length; i++) {\n      el = childNodes[i]\n      if (el.nodeType === 1) {\n        if (!/SECTION|H1|H2|H3|H4|BLOCKQUOTE|UL/.test(el.nodeName)) {\n          isCursorNode = el === cursorNode\n          el = util.changeNodeName(el, 'section')\n          if (isCursorNode) {\n            this.$cursorNode = $(el)\n            this.cursor.setRange(el)\n          }\n        }\n      } else {\n        let $tmp = $(`<section></section>`)\n        $tmp.append(el.cloneNode())\n        parent.replaceChild($tmp[0], el)\n        this.$cursorNode = $tmp\n        this.cursor.setRange($tmp)\n      }\n    }\n  },\n\n  /**\n   * 清空内容\n   */\n  remove () {\n    this.setHtml()\n  },\n\n  /**\n   * 设置编辑器内容\n   * @param html\n   */\n  setHtml (html) {\n    this.$content.html(html || '<section><br></section>')\n    this._checkChildSection()\n    this.cursor.setRange(this.$content.firstChild(), 0)\n    this.$content.trigger('input')\n  },\n\n  /**\n   * 获取编辑器html内容\n   * 返回html内容\n   * @return {*}\n   */\n  getHtml () {\n    return this.$content.html()\n  },\n\n  /**\n   * 获取编辑器文本内容，\n   * 以纯文本形式返回数据\n   * @return {*|string}\n   */\n  getText () {\n    return this.$content.text()\n  },\n\n  /**\n   * destroy event and Node\n   */\n  destroy(){\n    let evt\n    // remove $events\n    for (let key in this.$eventHandlers) {\n      evt = this.$eventHandlers[key]\n      evt.$target.off(evt.type, evt.handler, evt.capture)\n      delete this.$eventHandlers[key]\n    }\n\n    // remove customEvents\n    for (let key in this.customEvents) {\n      evt = this.customEvents[key]\n      this.off(key)\n    }\n\n    // other object\n    this.cursor = null\n    this.toolbar = null\n    this.textStylePanel = null\n\n    // other ExpansionPanel\n    for (let key in this) {\n      if (this[key] instanceof ExpansionPanel) {\n        this[key] = null\n      }\n    }\n\n    // Node\n    this.$editor.remove()\n  },\n\n  /**\n   * set content height\n   * default minHeight is window innerHeight, marginBottom\n   * @param data\n   */\n  setContentHeight (data) {\n    let winHeight = window.innerHeight\n    let styles = {\n      // 防止正文内容被键盘挡住，无法查看\n      marginBottom: winHeight + 'px'\n    }\n    // check height\n    if (data.height) {\n      styles.height = typeof data.height === 'number' ? (data.height + 'px') : data.height\n    } else {\n      styles.minHeight = (util.int(data.minHeight) || winHeight) + 'px'\n    }\n\n    this.$content.css(styles)\n  },\n\n  /**\n   * get base64 images from this.$content\n   * @returns {Array}\n   */\n  getBase64Images () {\n    const arr = []\n    const $imgs = this.$content.find('img')\n    let img, base64\n    for (let i = 0; i < $imgs.length; i++) {\n      img = $imgs[i]\n      base64 = img.src\n      if (/^data:.+?;base64,/.test(base64)) {\n        arr.push({\n          id: img.id,\n          base64: base64,\n          blob: base64ToBlobData(base64)\n        })\n      }\n    }\n    return arr\n  },\n\n  /**\n   * 设置指定id图片src\n   * @param id\n   * @param src\n   * @returns {boolean}\n   */\n  setImageSrc (id, src) {\n    let img = this.$content.find('#' + id)[0]\n    if (img) {\n      img.src = src\n      img.removeAttribute('id')\n      return true\n    }\n    return false\n  },\n\n  /**\n   * plugin\n   * @param fn\n   */\n  plugin (fn) {\n    if (typeof fn === 'function') {\n      fn.call(this)\n    }\n  },\n\n  /**\n   * check cursor position\n   */\n  checkPosition () {\n    const $el = this.$cursorNode = this.cursor.getCurrentNode()\n    // 当前光标位置\n    let cursorOffset = this.cursor.offset\n    // 文本内容长度\n    let len = $el.text().length\n    // 当前元素高度\n    let height = $el.height()\n    // 当前元素top\n    let top = $el.offset().top\n    let scrollTop\n\n    // 当前光标位置，距当前元素顶部距离\n    let cursorHeight = 0\n\n    // 每行大概有几个字\n    let textNumOfPerLine = len / (height / this.lineHeight)\n    // 当前光标所在行\n    let line = height > this.lineHeight ? Math.floor(cursorOffset / textNumOfPerLine) : 1\n    // 当前光标位置，至当前元素顶部高度 - 1行高，防止移动后，光标位置太贴近顶部\n    let cursorHeightInCurrentNode = (line - 1) * this.lineHeight\n\n    // editor postion: fixed;\n    if (this.options.fixed) {\n\n    } else {\n      // 当前光标位置超过了屏幕的4分之1\n      if (cursorHeightInCurrentNode > window.innerHeight / 4) {\n        cursorHeight = cursorHeightInCurrentNode\n      }\n      scrollTop = $(window).scrollTop()\n      $(window).scrollTop(scrollTop + top + cursorHeight - this.options.offsetTop, this.options.speed)\n    }\n  }\n}\n\nexport default ZxEditor\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/16 20:28\n */\nimport { emit, off, on } from '../custom-events'\nimport { getPasteText } from '../events/paste'\nimport { base64ToBlobData, blobToUrl, fileToBase64 } from '../image-handler/index'\nimport util from '../util/index'\nimport { createElement, createVdom } from '../dom-class/helper'\n\nexport function extendPrototypes (ZxEditor) {\n  // custom events\n  ZxEditor.prototype.on = on\n  ZxEditor.prototype.emit = emit\n  ZxEditor.prototype.off = off\n  // static method\n  ZxEditor.prototype.getPasteText = getPasteText\n  // static utils\n  for (let key in util) {\n    if (util.hasOwnProperty(key)) {\n      ZxEditor.prototype[key] = util[key]\n    }\n  }\n  ZxEditor.prototype.blobToUrl = blobToUrl\n  ZxEditor.prototype.base64ToBlobData = base64ToBlobData\n  ZxEditor.prototype.fileToBase64 = fileToBase64\n  // dom\n  ZxEditor.prototype.createElement = createElement\n  ZxEditor.prototype.createVdom = createVdom\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/15 21:49\n */\nimport $ from '../dom-class'\nimport util from '../util/index'\nimport { textStyle } from '../plugins/text-style/index'\nimport { selectPictureBtn } from '../plugins/select-picture-btn/index'\nimport Toolbar from '../toolbar'\n\nexport function initDom (options) {\n  // content\n  this.$content = $(`<div class=\"zx-editor-content-wrapper is-empty\" contenteditable=\"${options.editable}\"><section><br></section></div>`)\n\n  this.setContentHeight(options)\n\n  // editor\n  this.$editor = $(`<div class=\"zx-editor\"></div>`)\n\n  // append to $eidtor\n  this.$editor.append(this.$content)\n\n  // toolbar\n  this.toolbar = new Toolbar(options, this)\n\n  // append to $wrapper\n  this.$wrapper.append(this.$editor)\n\n  // get lineHeight\n  this.lineHeight = util.int(this.$content.styles().lineHeight)\n\n  // plugin\n  // sort btn\n  options.toolbarBtns.forEach(name => {\n    if (name === 'select-picture') {\n      this.plugin(selectPictureBtn)\n    } else if (name === 'text-style') {\n      this.plugin(textStyle)\n    }\n  })\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/15 21:46\n */\nimport $ from '../dom-class'\n\nexport function initStyle (options) {\n  /**\n   * *****************************************\n   * append style\n   * *****************************************\n   */\n  // main color\n  let style = `.zx-editor .m-color{color:${options.mainColor} !important;}.zx-editor .text-style-outer-wrapper .__tag-wrapper dd i {border-color:${options.mainColor} !important;}`\n\n  // line-height, caret-color\n  if (options.lineHeight || options.cursorColor) {\n    let lineHeight = options.lineHeight ? `line-height:${options.lineHeight};` : ''\n    let caretColor = options.cursorColor ? `caret-color:${options.cursorColor}` : ''\n    style += `.zx-editor .zx-editor-content-wrapper{${lineHeight + caretColor}}`\n  }\n  if (options.paragraphTailSpacing) {\n    style += `.zx-editor .zx-editor-content-wrapper > *{margin-bottom:${options.paragraphTailSpacing};}`\n  }\n  // placeholder\n  if (options.placeholder || options.placeholderColor) {\n    let content = options.placeholder ? `content:'${options.placeholder}';` : ''\n    let color = options.placeholderColor ? `color:${options.placeholderColor};` : ''\n    style += `.zx-editor .zx-editor-content-wrapper.is-empty:before{${content + color}}`\n  }\n  if (options.borderColor) {\n    style += `.zx-editor .border-top:before, .zx-editor .border-bottom:after {border-color: ${options.borderColor}`\n  }\n\n  /**\n   * *****************************************\n   * editor $content\n   * *****************************************\n   */\n  $('head').append(`<style type=\"text/css\">${style}</style>`)\n}\n","/**\n * Created by Capricorncd.\n * User: https://github.com/capricorncd\n * Date: 2019/04/15 21:53\n */\nimport $ from '../dom-class'\nimport { window } from 'ssr-window'\nimport util from '../util'\nimport { getPasteText } from './paste'\n\n/**\n * handle events\n */\nexport function handleEvents () {\n\n  const $content = this.$content\n\n  const $window = $(window)\n\n  // const options = this.options\n\n  /**\n   * ****************************************************\n   * window on resize\n   * ****************************************************\n   */\n  function windowResize () {\n    // toolbar\n    this.toolbar.init()\n    // expansion panels\n    this.expansionPanels.forEach(item => {\n      item.init()\n    })\n    this.emit('windowResize', this)\n  }\n\n  this.$eventHandlers.windowResize = {\n    $target: $window,\n    type: 'resize',\n    handler: windowResize.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * content on paste\n   * ****************************************************\n   */\n  function contentPaste (e) {\n    e.preventDefault()\n    getPasteText(e).then(str => {\n      // 添加至焦点处\n      this.insertElm(util.removeHtmlTags(str))\n    })\n  }\n\n  this.$eventHandlers.contentPaste = {\n    $target: $content,\n    type: 'paste',\n    handler: contentPaste.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * content on input\n   * ****************************************************\n   */\n  function contentInput () {\n    // check empty in content\n    this._checkEmpty()\n\n    // check cursor node position\n    this.checkPosition()\n\n    // emit content on change\n    this.emit('change', this)\n  }\n\n  this.$eventHandlers.contentInput = {\n    $target: $content,\n    type: 'input',\n    handler: contentInput.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * content on focus\n   * ****************************************************\n   */\n  function contentFocus () {\n    // console.error('contentFocus')\n    // hide all expansionPanels\n    // this.expansionPanels.forEach(ep => {\n    //   ep.hide()\n    // })\n    // toolbar\n    if (!this.options.toolbarBeenFixed) {\n      this.toolbar.show()\n    }\n  }\n\n  this.$eventHandlers.contentFocus = {\n    $target: $content,\n    type: 'focus',\n    handler: contentFocus.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * content on blur\n   * ****************************************************\n   */\n  function contentBlur () {\n    // save $cursorNode\n    this.$cursorNode = this.cursor.getCurrentNode()\n\n    this._checkChildSection()\n    // console.warn(this.$cursorNode[0])\n    // toolbar\n    if (!this.options.toolbarBeenFixed) {\n      this.toolbar.hide()\n    }\n  }\n\n  this.$eventHandlers.contentBlur = {\n    $target: $content,\n    type: 'blur',\n    handler: contentBlur.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * content on click\n   * ****************************************************\n   */\n  function contentClick () {\n    // save $cursorNode\n    this.$cursorNode = this.cursor.getCurrentNode()\n    // check position\n    this.checkPosition()\n    // textStylePanel is undefined, or is hide\n    if (!this.textStylePanel || !this.textStylePanel.visible) return\n    this.textStylePanel.resetActiveState()\n  }\n\n  this.$eventHandlers.contentClick = {\n    $target: $content,\n    type: 'click',\n    handler: contentClick.bind(this)\n  }\n\n\n  /**\n   * ****************************************************\n   * content on keydown\n   * ****************************************************\n   */\n  function contentKeydown (e) {\n    this.emit('keydown', e)\n  }\n\n  this.$eventHandlers.contentKeyup = {\n    $target: $content,\n    type: 'keydown',\n    handler: contentKeydown.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * content on keyup\n   * ****************************************************\n   */\n  function contentKeyup (e) {\n    this.emit('keyup', e)\n    // handle enter keyup\n    if (e.key === 'Enter' || e.keyCode === 13) {\n      // check section node\n      this._checkChildSection()\n      // content on click\n      contentClick.call(this)\n    }\n    // check position\n    // this.checkPosition()\n  }\n\n  this.$eventHandlers.contentKeyup = {\n    $target: $content,\n    type: 'keyup',\n    handler: contentKeyup.bind(this)\n  }\n\n  /**\n   * ****************************************************\n   * register events\n   * ****************************************************\n   */\n  let evt\n  for (let key in this.$eventHandlers) {\n    evt = this.$eventHandlers[key]\n    evt.$target.on(evt.type, evt.handler, evt.capture)\n  }\n}\n"],"names":["doc","document","body","addEventListener","removeEventListener","activeElement","blur","nodeName","querySelector","querySelectorAll","getElementById","createEvent","initEvent","createElement","children","childNodes","style","setAttribute","getElementsByTagName","location","hash","win","window","navigator","userAgent","history","CustomEvent","this","getComputedStyle","getPropertyValue","Image","Date","screen","setTimeout","clearTimeout","unique","arr","uniqueArray","i","length","indexOf","push","changeNodeName","oldNode","tagName","oldNodeName","toLowerCase","util","strip","TypeError","el","nodeType","appendChild","className","id","getAttribute","innerHTML","parentNode","replaceChild","createTextNode","str","tag","attrs","_typeof","key","hasOwnProperty","createVdom","vnode","child","itemNode","Array","isArray","forEach","item","scrollTo","args","left","top","duration","easing","each","animateTop","animateLeft","isWindow","scrollTop","scrollLeft","regTrim","USER_AGENT","PLATFORM","platform","int","n","num","parseInt","isNaN","trim","toString","replace","isObject","obj","isAbsolute","isObj","toHex","hex","isIPhone","test","isIPhoneX","height","width","supportBoxModel","div","paddingLeft","result","offsetWidth","removeChild","isElement","removeHtmlTags","rgbToHex","rgb","RegExp","$1","$2","$3","slice","ArrayLike","index","call","toHump","match","toUpperCase","ZxEditorQuery","selector","context","doms","tempDiv","every","_this","prototype","constructor","anyNode","j","$","is","closest","parents","eq","len","find","found","foundElements","findParentFrom","parent","tmpParent","current","firstChild","lastChild","next","nextElementSibling","addClass","split","cls","_this2","classList","add","removeClass","_this3","remove","hasClass","contains","attr","value","arguments","removeAttr","removeAttribute","data","dataStorage","val","append","newChild","k","appendTo","insertAfter","after","insertBefore","nextSibling","cloneNode","before","prepend","prependTo","compareWith","matches","webkitMatchesSelector","msMatchesSelector","isTextNode","isEmpty","text","isFirstChildren","target","isLastChildren","fn","thisArg","textContent","html","hide","display","show","on","eventType","useCapture","attachEvent","off","detachEvent","trigger","events","eventData","event","evt","detail","bubbles","cancelable","e","dispatchEvent","css","props","prop","styles","innerWidth","parseFloat","outerWidth","includeMargins","innerHeight","outerHeight","offsetHeight","offset","box","getBoundingClientRect","clientTop","clientLeft","scrollY","scrollX","callback","pageYOffset","undefined","CursorClass","$parent","selection","range","currentNode","timer","$el","setRange","init","getSelection","getRangeAt","Range","removeAllRanges","targetNode","Math","min","setStart","collapse","addRange","getCurrentNode","needElement","endContainer","startOffset","$current","DEF_OPTS","head","headHeight","headLeftBtnClassName","headLeftBtnText","headTitle","name","onHeadClick","onBodyClick","ExpansionPanel","options","zxEditor","ZxEditor","opts","Object","assign","editorInstance","expansionPanels","visible","$head","headAlign","$body","$eventHandlers","$target","type","handler","stopPropagation","$leftBtn","$switch","$editor","changeTag","$cursorNode","cursorNode","ul","cloneAttrs","createLi","li","cursor","source","winHeight","emit","IPHONEX_BOTTOM_OFFSET_HEIGHT","DEF_COLORS","textStyle","toolbar","addButton","COLORS","textStyleColors","panelBody","colors","color","formatColorHexadecimal","createColorVNode","$panelBody","textStylePanel","textStyleHeadLeftBtnText","textStyleTitle","textStyleHeadAlign","setColorInPanel","setTagInPanel","$colorsParent","$colors","$tagsParent","$tags","$activeTag","$activeColor","$tmp","resetActiveState","selectPictureBtn","$selectPictureLabel","$selectPictrueInput","input","capture","imageSectionTemplate","imageSectionTemp","imageOptions","imageMaxWidth","file","files","customizePictureHandler","fileToBase64","then","res","base64","alt","insertElm","DEF_BTN_OPTS","innerHtml","Toolbar","toolbarBeenFixed","toolbarHeight","getPasteText","Promise","resolve","clipboardData","pasteStr","items","getAsString","counter","count","notifyName","customEvents","notifyArr","apply","findIndex","splice","getImageInfo","img","src","onload","defaultData","element","naturalWidth","naturalHeight","size","orientation","raw","canvas","ctx","getContext","imgWidth","imgHeight","rotate","PI","drawImage","toDataURL","rotateAndToBase64","onerror","createCanvas","p","cw","ch","sx","sy","sw","sh","ratio","numerator","denominator","DEF_OPTIONS","heigth","imageMaxSize","ignoreGif","forceResize","params","$btn","$btns","eventHandlerKey","bind","base64ToBlobData","base64Data","onlyData","atob","ia","Uint8Array","charCodeAt","Blob","reject","File","EXIF","handleFile","getData","info","getAllTags","Orientation","blobToUrl","blob","URL","createObjectURL","reader","FileReader","readAsDataURL","url","dataType","iw","ih","targetWidth","targetHeight","forceImageResize","scaling","canvasWidth","canvasHieght","floor","computeCropInfo","handleImageData","RangeError","editable","fixed","placeholder","placeholderColor","lineHeight","paragraphTailSpacing","cursorColor","offsetTop","speed","toolbarBtns","mainColor","borderColor","_options","Error","$wrapper","version","extendPrototypes","$content","setContentHeight","plugin","caretColor","content","$window","contentClick","checkPosition","windowResize","contentPaste","preventDefault","contentInput","_checkEmpty","contentFocus","contentBlur","_checkChildSection","contentKeyup","keyCode","newRangeEl","newRangeOffset","$item","rangeOffset","rangeNodeStr","tmpStr","substr","$newEl","$elm","$section","console","log","insertBlankLine","isCursorNode","setHtml","getHtml","getText","destroy","marginBottom","minHeight","getBase64Images","$imgs","setImageSrc","cursorOffset","cursorHeight","textNumOfPerLine","cursorHeightInCurrentNode"],"mappings":"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"}